"use strict";requirejs(["jquery","parsley","parsley/fr","jqsobject","toastr","app/modules/Utils","app/modules/Timer","app/modules/Ticket","c/tel/js/tel","c/tel/js/utils"],function(u,e,t,n,l,i,o,r,s,c){var m=new i,a=new o,d=new r,p={form_name:"#fcheckouttickets",telInput:null,isSubmitting:!1,init:function(){if(null!=document.getElementById("fcheckouttickets")){this.ticket=new r,(window.attachEvent||window.addEventListener)(window.attachEvent?"onbeforeunload":"beforeunload",function(e){var t=null;return 0==p.isSubmitting&&(t="Are you sure to leave the page?",(e||window.event).returnValue=t),t}),window.addEventListener("unload",function(e){0==p.isSubmitting&&p.unlockTicket()}),u(document).on("submit",p.form_name,p.onSubmitForm),document.getElementById("btn_cancel").onclick=function(){try{return p.isSubmitting=!0,p.unlockTicket(),window.history.go(-1),!1}catch(e){console.log(e)}},this.telInput=u("#mphone"),this.initTel();var e=null;null!=document.getElementById("timeout")&&(e=document.getElementById("timeout").value);var t=null,n=null;if(null!=document.getElementById("timeout_msg")&&(t=document.getElementById("timeout_msg").value),null!=document.getElementById("urllink")&&(n=document.getElementById("urllink").value),null!=e){var l=document.querySelector("#time");a.startTimer(e,l,n,t)}}},unlockTicket:function(){d.unlockTicket(this,function(e,t){null!==t&&t.result},{})},initTel:function(){this.telInput.intlTelInput({initialCountry:"nl",allowDropdown:!0,onlyCountries:["be","fr","bg","nl","de","lu","es","uk"],getNumber:0}).done(function(){})},onSubmitForm:function(e){p.isSubmitting=!0;var t="";if(u.trim(p.telInput.val())){if(!p.telInput.intlTelInput("isValidNumber"))return p.telInput.removeClass("parsley-error"),p.telInput.removeClass("parsley-success"),p.telInput.addClass("parsley-error"),!1;t=p.telInput.intlTelInput("getNumber"),p.telInput.removeClass("parsley-error"),p.telInput.addClass("parsley-success")}else p.telInput.removeClass("parsley-error");m.setValueByID("mphone_result",t)}};p.init()});