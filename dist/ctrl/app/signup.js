"use strict";requirejs(["jquery","parsley","parsley/fr","jqsobject","c/datepicker/js/datepicker","toastr","app/modules/Utils","app/modules/Profile","c/tel/js/tel","c/tel/js/utils"],function(t,e,n,i,r,l,s,o,a,u){var c={form_name:"#fsignup",btn_link_validation:"#btn_link_validation",telInput:t("#mphone"),lang:t("html").closest("[lang]").attr("lang")||"en",init:function(){t(document).on("submit",c.form_name,c.onSubmitForm),t(document).on("click",c.btn_link_validation,c.redirect_validation),this.initTel()},initTel:function(){this.telInput.intlTelInput({initialCountry:"nl",allowDropdown:!0,onlyCountries:["be","fr","bg","nl","de","lu","es","uk"],getNumber:0}).done(function(){})},initBirthDate:function(){return t("#bdate").datepicker({timepicker:!1,language:"en",startView:2,minViewMode:1,maxViewMode:2,altFieldDateFormat:"yyyy-mm-dd",clearButton:!0,autoClose:!0}).data("datepicker")},onSubmitForm:function(e){try{if(c.hideError(),t.trim(c.telInput.val())){if(!c.telInput.intlTelInput("isValidNumber"))return c.telInput.removeClass("parsley-error"),c.telInput.removeClass("parsley-success"),void c.telInput.addClass("parsley-error");c.telInput.removeClass("parsley-error"),c.telInput.addClass("parsley-success")}else c.telInput.removeClass("parsley-error");if(!t(c.form_name).parsley().isValid())return;var n=t(c.form_name).serializeJSON();if(0===Object.keys(n).length)return;if(c.disableBtn(),t.trim(c.telInput.val())){var i=c.telInput.intlTelInput("getNumber");n.MPHONE=i}(new o).signup(this,function(e,n){c.enableBtn(),null!==n&&!0===n.result?(jQuery("#panel_form").css("display","none"),jQuery("#panel_success").css("display","block"),c.signup_redirect()):null==n||56237620!==n.code&&71610534!==n.code?c.showError(null):c.showError(n.code)},n)}catch(e){c.enableBtn()}finally{e.preventDefault()}},signup_redirect:function(){},redirect_validation:function(){var e="/signup/validation?a="+document.getElementById("email").value;window.location.href=e},disableBtn:function(){t("#bsubmit").prop("disabled",!0),t("#bsubmit > span").show()},enableBtn:function(){t("#bsubmit").prop("disabled",!1),t("#bsubmit > span").hide()},showError:function(e){56237620===e||71610534===e?(t("#error_acc_exist").css("display","block"),t("#error_acc_exist").css("visibility","visible")):(t("#error_unknown").css("display","block"),t("#error_unknown").css("visibility","visible"))},hideError:function(){t("#error_msg").css("display","none"),t("#error_msg").css("visibility","hidden"),t("#error_unknown").css("display","none"),t("#error_unknown").css("visibility","hidden")}};c.init()});