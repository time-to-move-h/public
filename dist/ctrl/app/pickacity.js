"use strict";requirejs(["jquery","parsley","parsley/fr","jqsobject","jquery.loading","app/modules/Profile"],(function($,parsley,parsley_lang,jqsobject,jqloading,Profile){var pickacity={profile:null,panel_success:"sub_success",panel_failed:"sub_failed",init:function(){this.profile=new Profile,document.getElementById("fpickacity").onsubmit=function(){try{pickacity.onSubmitForm()}catch(e){console.log(e)}finally{return!1}}},wall_redirect:function(){var surl="/home";window.location.href=surl},onSubmitForm:function(){try{var instance;if(this.hideError(),!$("#fpickacity").parsley().isValid())return;var jsonObj=$("#fpickacity").serializeJSON();jsonObj.CITY&&this.onSaveSearchPreference(jsonObj)}catch(e){}},onSaveSearchPreference:function(jsonObj){try{this.disableBtn(),this.profile.saveSearchPreference(this,(function(self,model){console.log(model),null!==model&&!0===model.result?self.wall_redirect():null!==model&&null!==model.code?(self.enableBtn(),self.showError(model.code)):(self.enableBtn(),self.showError(null))}),jsonObj)}catch(e){self.enableBtn()}},disableBtn:function(){document.getElementById("bsubmit").disabled=!0,$("#bsubmit > span").show()},enableBtn:function(){document.getElementById("bsubmit").disabled=!1,$("#bsubmit > span").hide()},showError:function(code){},hideError:function(){}};pickacity.init()}));