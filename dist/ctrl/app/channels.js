requirejs(["jquery","app/modules/Utils","app/modules/Channel","packery","scroll","doT","moment","moment/fr"],function(o,t,e,a,i,r,n,s){var d=new t,l=new e,h={offset:0,firstLoad:!0,msnry:null,q:null,p:null,init:function(){this.q=d.getUrlParameter("q"),void 0!==this.q&&null!==this.q||(this.q=""),this.p=d.getUrlParameter("p"),void 0!==this.p&&null!==this.p||(this.p=""),this.msnry=new a(".grid-cha",{itemSelector:".grid-cha-item",columnWidth:1}),new i(".grid-cha",{path:function(){return"/articles/P"},loadOnScroll:!1}).on("scrollThreshold",function(){h.loadmore()}),this.placeholder(),l.showLatest(this,this.onLoadChannels,{o:this.offset,q:this.q,p:this.p})},placeholder:function(){var t,e=o("#tpl_channel").html(),a=r.template(e);for(o("#grid-data").find(".grid-cha-item").remove(),t=0;t<12;t++){var i=a({NAME:"",TITLE:"",DESCL:"",PICTURE_MIN:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",CHAURL:""});o("#grid-data").append(i),this.msnry.appended(i)}this.msnry.layout()},onLoadChannels:function(a,t){if(null!==t&&!0===t.result)if(0<t.data.length){!0===a.firstLoad&&o("#grid-data").find(".grid-cha-item").remove();window.location.pathname;var i=d.getUserLanguage(),e=o("#tpl_channel").html(),n=r.template(e);o.each(t.data,function(){var t=i+"/channel/"+this.NAME,e=n({NAME:this.NAME,TITLE:this.TITLE,DESCL:this.DESCL,PICTURE_MIN:this.PICTURE_MIN,CHAURL:t});o("#grid-data").append(e),a.msnry.appended(e),a.msnry.layout()}),o(".channel_img_background").on("error",function(){}),o("#msg_nodata").css("display","none")}else{!0===a.firstLoad&&o("#grid-data").find(".grid-cha-item").remove();var s=o("#grid-data").text().length;null===s&&(s=0),s<1&&(o("#grid-data").find(".grid-cha-item").remove(),o("#msg_nodata").css("display","block")),a.resetOffset(a)}else o("#grid-data").find(".grid-cha-item").remove(),o("#msg_nodata").css("display","block"),a.resetOffset(a)},resetOffset:function(t){t.offset--},loadmore:function(){this.firstLoad=!1,this.offset++,l.showLatest(this,this.onLoadChannels,{o:this.offset,q:this.q,p:this.p})}};h.init()});