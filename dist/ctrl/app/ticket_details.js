"use strict";requirejs(["jquery","parsley","parsley/fr","jqsobject","app/modules/Ticket","c/tingle/tingle.min"],function(e,t,n,o,i,l){var s={form_name:"fticket_details",$btn_submit:"btn_ticket_details",ticket:null,init:function(){this.ticket=new i,document.getElementById(this.form_name).onsubmit=function(){try{s.onSubmitForm()}catch(t){console.log(t)}finally{return!1}},e(document).on("click",".qrcode",s.openViewToken),s.modal_token=new l.modal({footer:!1,stickyFooter:!1,closeMethods:["overlay","button","escape"],closeLabel:"Close",cssClass:["custom-class-1"],onOpen:function(){console.log("modal open")},onClose:function(){},beforeClose:function(){return!0}})},openViewToken:function(){s.modal_token.open(),s.modal_token.setContent('<img class="qrcode" src="/util/qrcode?s=qrl&amp;w=500&amp;h=500&amp;d='+e(this).data("token")+'">')},onSubmitDetail:function(t){try{this.disableBtn(),this.ticket.updateTicketDetails(this,function(t,e){null!==e&&!0===e.result?alert("ok"):alert("pas ok"),t.enableBtn()},t)}catch(t){console.log(t)}},wall_redirect:function(){window.location.href="/results"},onSubmitForm:function(){try{if(!e("#"+this.form_name).parsley().isValid())return;var t=e("#"+this.form_name).serializeJSON();t&&this.onSubmitDetail(t)}catch(t){console.log(t)}},disableBtn:function(){document.getElementById(this.$btn_submit).disabled=!0},enableBtn:function(){document.getElementById(this.$btn_submit).disabled=!1}};s.init()});