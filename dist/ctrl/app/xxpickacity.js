"use strict";requirejs(["jquery","parsley","parsley/fr","jqsobject","jquery.loading","app/modules/Profile"],function(n,e,i,t,r,o){var l={profile:null,panel_success:"sub_success",panel_failed:"sub_failed",init:function(){this.profile=new o,document.getElementById("fpickacity").onsubmit=function(){try{l.onSubmitForm()}catch(e){console.log(e)}finally{return!1}}},wall_redirect:function(){window.location.href="/home"},onSubmitForm:function(){try{if(this.hideError(),!n("#fpickacity").parsley().isValid())return;var e=n("#fpickacity").serializeJSON();e.CITY&&this.onSaveSearchPreference(e)}catch(e){}},onSaveSearchPreference:function(e){try{this.disableBtn(),this.profile.saveSearchPreference(this,function(e,n){null!==n&&!0===n.result?e.wall_redirect():null!==n.code?(e.enableBtn(),e.showError(n.code)):(e.enableBtn(),e.showError(null))},e)}catch(e){self.enableBtn(),console.log(e)}},disableBtn:function(){document.getElementById("bsubmit").disabled=!0,n("#bsubmit > span").show()},enableBtn:function(){document.getElementById("bsubmit").disabled=!1,n("#bsubmit > span").hide()},showError:function(e){},hideError:function(){}};l.init()});